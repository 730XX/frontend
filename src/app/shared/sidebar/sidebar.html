<aside
    class="border-r border-sidebar transition-all duration-300 ease-in-out h-screen flex flex-col bg-sidebar text-sidebar-foreground shadow-sm"
    [ngClass]="collapsed ? 'w-16' : 'w-64'">
    <div class="flex flex-col h-full">

        <!-- Logo/Brand -->
        <div class="p-4 flex items-center gap-3 border-b border-sidebar">
            <div class="h-10 w-10 min-w-[2.5rem] rounded-lg bg-primary flex items-center justify-center shadow-md">
                <lucide-icon [img]="icons.Package" class="h-6 w-6 text-primary-foreground"></lucide-icon>
            </div>

            <div *ngIf="!collapsed" class="overflow-hidden whitespace-nowrap">
                <h2 class="text-base font-bold text-sidebar-foreground">
                    Sistema Inventario
                </h2>
                <p class="text-xs text-muted-foreground">v1.0.0</p>
            </div>
        </div>

        <!-- Navigation Menu -->
        <nav class="px-3 py-4 flex-1">
            <div class="text-xs font-semibold text-muted-foreground px-3 mb-2 uppercase tracking-wider" *ngIf="!collapsed">
                Gestión
            </div>

            <ul class="space-y-1">
                <li *ngFor="let item of menuItems">
                    <a 
                        [routerLink]="item.url" 
                        routerLinkActive="bg-primary text-primary-foreground shadow-sm"
                        class="flex items-center gap-3 px-3 py-2.5 hover:bg-accent hover:text-accent-foreground rounded-md transition-all duration-200 text-sidebar-foreground group">
                        <lucide-icon [img]="item.icon" class="h-5 w-5 flex-shrink-0"></lucide-icon>
                        <span *ngIf="!collapsed" class="overflow-hidden whitespace-nowrap text-sm font-medium">
                            {{ item.title }}
                        </span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- User Info & Logout -->
        <div class="p-3 border-t border-sidebar">
            <div *ngIf="!collapsed && currentUser" class="mb-2 px-2">
                <div class="flex items-center gap-2 mb-2">
                    <div class="h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-semibold text-xs">
                        {{ getUserInitials() }}
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-sidebar-foreground truncate">
                            {{ currentUser.usuarios_nombre }}
                        </p>
                        <p class="text-xs text-muted-foreground truncate">
                            {{ currentUser.usuarios_rol }}
                        </p>
                    </div>
                </div>
            </div>

            <button
                (click)="logout()"
                class="w-full flex items-center gap-3 px-3 py-2.5 hover:bg-red-400 hover:text-white rounded-md transition-all duration-200 text-sidebar-foreground group cursor-pointer">
                <lucide-icon [img]="icons.LogOut" class="h-5 w-5 flex-shrink-0"></lucide-icon>
                <span *ngIf="!collapsed" class="overflow-hidden whitespace-nowrap text-sm font-medium">
                    Cerrar Sesión
                </span>
            </button>
        </div>

        <!-- Footer -->
        <div class="p-3 border-t border-sidebar" *ngIf="!collapsed">
            <div class="text-xs text-muted-foreground text-center">
                © 2025 Sistema Inventario
            </div>
        </div>

    </div>
</aside>